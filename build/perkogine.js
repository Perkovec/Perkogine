var Perkogine={version:"1.0Î²"};Perkogine.Deg2Rad=Math.PI/180,Perkogine.Rag2Deg=180/Math.PI,Perkogine.Vector2D=function(t,e){this.x=t||0,this.y=e||0},Perkogine.Vector2D.prototype.set=function(t,e){return this.x=t,this.y=e,this},Perkogine.Vector2D.prototype.clone=function(){return new this.constructor(this.x,this.y)},Perkogine.Vector2D.prototype.rotateAround=function(t,e){e=Perkogine.Deg2Rad*e;var o=this.clone();return this.x=Math.cos(e)*(o.x-t.x)-Math.sin(e)*(o.y-t.y)+t.x,this.y=Math.cos(e)*(o.y-t.y)+Math.sin(e)*(o.x-t.x)+t.y,this},Perkogine.Vector2D.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},Perkogine.Scene=function(){this.objects=[]},Perkogine.Scene.prototype.Add=function(t){this.objects.push(t)},Perkogine.Renderer=function(t){t=t||{},this.parent=t.parent||document.body,this.width=t.width||500,this.height=t.height||500;var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.parent.appendChild(e);var o=e.getContext("2d");this.domElement=e,this._ctx=o},Perkogine.Renderer.prototype.clear=function(){this._ctx.clearRect(0,0,this.width,this.height)},Perkogine.Renderer.prototype.Render=function(t){function e(t){r.beginPath(),r.arc(t.position.x,t.position.y,t.radius*t.scale,0,2*Math.PI,!1),r.fillStyle=t.color,r.fill(),r.strokeStyle=t.borderColor,r.strokeWidth=t.strokeWidth,r.stroke()}function o(t){r.beginPath(),r.save(),r.translate(t.position.x,t.position.y),r.rotate(Perkogine.Deg2Rad*t.rotation),r.rect(-t.width/2,-t.height/2,t.width,t.height),r.fillStyle=t.color,r.fill(),r.strokeStyle=t.borderColor,r.strokeWidth=t.strokeWidth,r.stroke(),r.restore()}function i(t){r.beginPath(),r.save(),r.translate(t.position.x,t.position.y),r.rotate(Perkogine.Deg2Rad*t.rotation),r.scale(t.width/t.height,1),r.arc(0,0,t.height/2,0,2*Math.PI,!1),r.fillStyle=t.color,r.fill(),r.strokeStyle=t.borderColor,r.strokeWidth=t.strokeWidth,r.stroke(),r.restore()}var r=this._ctx,n=t.objects.filter(function(t){return t.visible});n.sort(function(t,e){return t.layer<e.layer?-1:t.layer>e.layer?1:0});for(var s=0;s<n.length;++s){var h=n[s];h instanceof Perkogine.Circle?e(h):h instanceof Perkogine.Rectangle?o(h):h instanceof Perkogine.Ellipse&&i(h)}},Perkogine.Object=function(t){this.visible=t.visible||!0,this.position=t.position||new Perkogine.Vector2D,this.rotation=t.rotation||0,this.scale=t.scale||1},Perkogine.Object.prototype.constructor=Perkogine.Object,Perkogine.Object.prototype.translate=function(t){return this.position.x+=Math.cos(Perkogine.Deg2Rad*this.rotation)*t,this.position.y+=Math.sin(Perkogine.Deg2Rad*this.rotation)*t,this},Perkogine.Object.prototype.rotate=function(t){return this.rotation+=t,this},Perkogine.Object.prototype.rotateAround=function(t,e){return this.position.rotateAround(t,e),this},Perkogine.Object.prototype.copy=function(t){return this.visible=t.visible,this.position.copy(t.position),this.rotation=t.rotation,this.scale=t.scale,this},Perkogine.Object.prototype.clone=function(){return(new this.constructor).copy(this)},Perkogine.Circle=function(t){Perkogine.Object.call(this,arguments),this.radius=t.radius||0,this.color=t.color||"#FFFFFF",this.borderColor=t.borderColor||"#FFFFFF",this.borderWidth=t.borderWidth||0},Perkogine.Circle.prototype=Object.create(Perkogine.Object.prototype),Perkogine.Circle.prototype.constructor=Perkogine.Circle,Perkogine.Circle.prototype.clone=function(){return new this.constructor(this).copy(this)},Perkogine.Rectangle=function(t){Perkogine.Object.call(this,arguments),this.width=t.width||0,this.height=t.height||0,this.color=t.color||"#FFFFFF",this.borderColor=t.borderColor||"#FFFFFF",this.borderWidth=t.borderWidth||0},Perkogine.Rectangle.prototype=Object.create(Perkogine.Object.prototype),Perkogine.Rectangle.prototype.constructor=Perkogine.Rectangle,Perkogine.Rectangle.prototype.clone=function(){return new this.constructor(this).copy(this)},Perkogine.Ellipse=function(t){Perkogine.Object.call(this,arguments),this.width=t.width||0,this.height=t.height||0,this.color=t.color||"#FFFFFF",this.borderColor=t.borderColor||"#FFFFFF",this.borderWidth=t.borderWidth||0},Perkogine.Ellipse.prototype=Object.create(Perkogine.Object.prototype),Perkogine.Ellipse.prototype.constructor=Perkogine.Ellipse,Perkogine.Ellipse.prototype.clone=function(){return new this.constructor(this).copy(this)};